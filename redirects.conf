# vim: syntax=apache sw=4 sts=4

##### ESSENTIAL MONITORING VIP #####
<VirtualHost *:80>
    ServerName redirect-san.mozilla.org

    # two seconds of caching on the monitoring VIP
    Header always set Cache-Control "max-age=2, must-revalidate"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName redirect-san.mozilla.org

    # two seconds of caching on the monitoring VIP
    Header always set Cache-Control "max-age=2, must-revalidate"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://mozilla.org/" [L,R=307]

    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>
<VirtualHost *:80>
    ServerName redirects-http-only.external.zlb.scl3.mozilla.com

    # two seconds of caching on the monitoring VIP
    Header always set Cache-Control "max-age=2, must-revalidate"

    RewriteEngine On
    RewriteRule "^/?(.*)" "http://mozilla.org/" [L,R=307]
</VirtualHost>
# end essential monitoring vips #

###### Questionable redirects ######
#
# Further investigation is required.
#
####################################

# TODO: maintain this until SUMO decom
#Bug 1337850
#Just leaving commented out for now, just in case they want to revert again
#Same bug# comment 6
#<VirtualHost *:80>
#    ServerName support.mozilla.com
#    Redirect 301 / https://support.mozilla.com/
#</VirtualHost>
#<VirtualHost *:81>
#    ServerName https://support.mozilla.com
#    RedirectMatch 302 /(.*)$ https://support.mozilla.org/$1
#</VirtualHost>

# bug 835529
<VirtualHost *:80>
    ServerName www.support.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://support.mozilla.org/
</VirtualHost>


# TODO: this was imported directly from a standalone config and needs a more detailed audit
# TODO: urchin not in use anymore, standardize this
LogFormat "%h %v %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{Cookie}i\"" urchin

<VirtualHost *:80>
    ServerName mozilla.com
    ServerAdmin webmaster@mozilla.com

    Header always set Cache-Control "max-age=3600"

    Redirect 301 / https://mozilla.com/

    SetEnvIf X-Forwarded-For "^.*[\.:].*[\.:].*[\.:].*$" is-forwarded
    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/mozilla.com_error_log_%Y-%m-%d-%H 3600 -0"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/mozilla.com_access_%Y-%m-%d-%H 3600 -0" urchin env=!is-forwarded
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/mozilla.com_access_%Y-%m-%d-%H 3600 -0" x-forwarded-for env=is-forwarded
</VirtualHost>
<VirtualHost *:80>
    ServerName www.mozilla.com
    ServerAlias *.www.mozilla.com www.stage.mozilla.com *.www.stage.mozilla.com
    ServerAdmin webmaster@mozilla.com

    Header always set Cache-Control "max-age=3600"

    Redirect 301 / https://www.mozilla.com/

    SetEnvIf X-Forwarded-For "^.*[\.:].*[\.:].*[\.:].*$" is-forwarded
    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_error_log_%Y-%m-%d-%H 3600 -0"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_access_%Y-%m-%d-%H 3600 -0" urchin env=!is-forwarded
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_access_%Y-%m-%d-%H 3600 -0" x-forwarded-for env=is-forwarded
</VirtualHost>
<VirtualHost *:81>
    ServerName www.mozilla.com
    ServerAlias *.www.mozilla.com www.stage.mozilla.com *.www.stage.mozilla.com mozilla.com
    ServerAdmin webmaster@mozilla.com

    # Bug 1299807 - we do not set HSTS headers here because the https://mozilla.com -> https://www.mozilla.com is actually done in TrafficScript in Zeus in a rule named moz-idp-browserid-also-root-redirect on the neo-phx1 external Zeus cluster

    Header always set Cache-Control "max-age=3600"

    RedirectMatch 301 ^/$ https://www.mozilla.org/firefox/
    RedirectMatch 301 ^/about/?$ https://www.mozilla.org/firefox/about
    RedirectMatch 301 ^/([^\x00-\x1F]*)$ https://www.mozilla.org/$1

    SetEnvIf X-Forwarded-For "^.*[\.:].*[\.:].*[\.:].*$" is-forwarded
    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_error_log_%Y-%m-%d-%H 3600 -0"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_access_%Y-%m-%d-%H 3600 -0" urchin env=!is-forwarded
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.mozilla.com_access_%Y-%m-%d-%H 3600 -0" x-forwarded-for env=is-forwarded
</VirtualHost>

# TODO: review with EE whether this should, or should not, be HSTS (or just outright migrated to EE)
<VirtualHost *:80 *:81>
    ServerAdmin sysadmins@mozilla.org
    ServerName www.firefox.com
    ServerAlias firefox.com
    DocumentRoot /data/www/www.firefox.com/

    # bug 870410 (comment 9)
    #ExpiresActive On
    #ExpiresDefault A0
    #Header set Cache-Control "max-age=0, no-cache"
    # Raising this to 300 seconds cache to permit Zeus to cache responses more effectively.
    Header always set Cache-Control "max-age=300"

    RewriteEngine on
    RewriteMap lowercase int:tolower
    RewriteCond %{HTTP:Accept-Language} ^en(-us)? [NC]
    RewriteRule ^/m/(.*) https://www.mozilla.org/m/${lowercase:$1} [NC,R]

    Redirect /mobile https://www.mozilla.org/mobile
    Redirect /ux https://planet.firefox.com/ux/
    Redirect /beta https://www.mozilla.org/firefox/channel/
    Redirect /nightly https://nightly.mozilla.org
    Redirect /m https://www.mozilla.org/m
    Redirect /tour https://www.mozilla.org/firefox/central
    Redirect /aurora https://www.mozilla.org/firefox/channel/

    # bug 870410
    RewriteRule ^/universityambassadors$ https://www.mozilla.org/contribute/universityambassadors/ [NC,R=302]
    RewriteRule ^/os https://www.mozilla.org/firefox/os/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-os [NC,R=302]
    RewriteRule ^/marketplace https://marketplace.firefox.com/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-marketplace [NC,R=302]

    # bug 1004274
    RewriteRule ^/desktop https://www.mozilla.org/firefox/desktop/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-desktop [NC,R=301]

    # bug 1053356
    RewriteRule ^/android https://www.mozilla.org/firefox/android/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-android [NC,R=301]

    # bug 1091132
    RewriteRule ^/developer https://www.mozilla.org/firefox/developer/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-developer [NC,R=301]

    # bug 1091891
    RewriteRule ^/10 https://www.mozilla.org/firefox/independent/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-10 [NC,R=301]

    # bug 1094235
    RewriteRule ^/independent https://www.mozilla.org/firefox/independent/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-10 [NC,R=301]

    # bug 1098044
    RewriteRule ^/hello https://www.mozilla.org/firefox/hello/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-hello [NC,R=301]

    # bug 1159397
    RewriteRule ^/personal$ https://www.mozilla.org/firefox/personal/ [NC,R=302] 

    # bug 1219380
    RewriteRule ^/choose/?$ https://www.mozilla.org/firefox/choose/ [NC,R=302]

    # bug 1432228
    RewriteRule ^/switch/?$ https://www.mozilla.org/firefox/switch/ [NC,R=302,L]

    # bug 896570
    # bug 1427843
    RewriteRule ^/ https://www.mozilla.org/firefox/new/?utm_source=firefox-com&utm_medium=referral [NC,R=301]

    SetEnvIf X-Forwarded-For "^.*[\.:].*[\.:].*[\.:].*$" is-forwarded
    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/www.firefox.com_error_log_%Y-%m-%d-%H 3600 -0"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.firefox.com_access_log_%Y-%m-%d-%H 3600 -0" combined env=!is-forwarded
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/www.firefox.com_access_log_%Y-%m-%d-%H 3600 -0" x-forwarded-for env=is-forwarded
</VirtualHost>
#
# TODO: 20170327 atoll -- why does this have 'videos-ssl-cdn.mozilla.net', but no DNS?
# Bug 985149
# pulling videos-cdn.mozilla.net in to us (away from Edgecast ADN)
# then redirecting it out to videos.cdn.mozilla.net (Edgecast HTTP Large)
<VirtualHost *:80>
    ServerName videos-cdn.mozilla.net
    ServerAlias videos.mozilla.org videos-ssl-cdn.mozilla.net

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://videos-cdn.mozilla.net
    ServerAlias videos.mozilla.org videos-ssl-cdn.mozilla.net

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://videos.cdn.mozilla.net/
    # TODO: HSTS
</VirtualHost>

# TODO 20170327 atoll -- removed dev/stage hostnames
#bug 1263033
<VirtualHost *:80>
    ServerName join.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://join.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://donate.mozilla.org/? [R=307]

    # TODO: HSTS
</VirtualHost>

<VirtualHost *:80>
    ServerName addons.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://addons.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On

    RewriteRule ^/ja(?:-JP-mac)?/(firefox)(.*)$ https://addons.mozilla.jp/$1$2 [R=permanent,QSA,NE]
    RewriteRule ^/(\w{2,3}(?:-\w{2}(?:-mac)?)?)/thunderbird/(.+?)/dictionaries/?$ https://addons.mozilla.org/thunderbird/dictionaries/?lang=$1 [R,L]
    RewriteRule ^/(\w{2,3}(?:-\w{2}(?:-mac)?)?)/seamonkey/(.+?)/dictionaries/?$ https://addons.mozilla.org/$1/seamonkey/browse/type:3 [R,L]
    RewriteRule ^/(\w{2,3}(?:-\w{2}(?:-mac)?)?)/(.+?)/(.+?)/dictionaries/?$ https://addons.mozilla.org/firefox/dictionaries/?lang=$1 [R,L]
    RewriteRule ^/(ca|cs|da|de|en-US|el|es-ES|eu|fa|fi|fr|ga-IE|he|id|it|ja|ko|mn|nl|pl|pt-BR|pt-PT|ro|ru|sk|sq|sv-SE|uk|zh-CN|zh-TW|cy|tr|vi)/(.+?)/(\d.+?)/search-engines/?$ https://addons.mozilla.org/$1/firefox/browse/type:4/cat:all?sort=name [R,L]
    RewriteRule ^/(\w{2,3}(-\w{2}(-mac)?)?)/(.+?)/(.+?)/search-engines/?$ https://addons.mozilla.org/en-US/firefox/browse/type:4/cat:all?sort=name [R,L]
    RewriteRule ^/(ca|cs|da|de|en-US|el|es-ES|eu|fa|fi|fr|ga-IE|he|id|it|ja|ko|mn|nl|pl|pt-BR|pt-PT|ro|ru|sk|sq|sv-SE|uk|zh-CN|zh-TW|cy|tr|vi)/(.+?)/(\d.+?)/(.*)$ https://addons.mozilla.org/$1/$2/$4 [R,L]
    RewriteRule ^/(ca|cs|da|de|en-US|el|es-ES|eu|fa|fi|fr|ga-IE|he|id|it|ja|ko|mn|nl|pl|pt-BR|pt-PT|ro|ru|sk|sq|sv-SE|uk|zh-CN|zh-TW|cy|tr|vi)(/.*)?$ https://addons.mozilla.org/$1$2 [R,NE,L]
    RewriteRule ^/(\w{2,3}(-\w{2}(-mac)?)?)/?$ https://addons.mozilla.org/ [R]
    RewriteRule ^/(\w{2,3}(-\w{2}(-mac)?)?)/firefox/bookmarks/?$ https://addons.mozilla.org/firefox/bookmarks/ [R,L]
    RewriteRule ^/(\w{2,3}(-\w{2}(-mac)?)?)/(.+?)/(.+?)/(.*)$ https://addons.mozilla.org/$4/$6 [R,L,NE]
    RewriteRule ^/(\w{2,3}(-\w{2}(-mac)?)?)/(.*)$ https://addons.mozilla.org/$4 [R,NE]

    Redirect temp / https://addons.mozilla.org/
</VirtualHost>

###### Unreviewed redirects ######
#
# Please don't add anything new to this section.
#
##################################

<VirtualHost *:80>
    ServerName labs.mozilla.org
    ServerAlias labs.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # TODO: we can't https this because github pages?
    Redirect permanent / http://www.mozillalabs.com/
</VirtualHost>

#####################################################################
# mozilla store
## changes per Bug 730102
# Bug 731317
<VirtualHost *:80>
    ServerName apps.mozilla.com
    ServerAlias apps.mozilla.org market.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://marketplace.mozilla.org/
</VirtualHost>

#####################################################################
# extranet

# TODO: 20170328 atoll -- asked pmac
<VirtualHost *:80>
    ServerName extranet.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://mozilla.grouphub.com/
</VirtualHost>

#####################################################################
# directory

<VirtualHost *:80>
    ServerName directory.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect temp / http://www.dmoz.org/
    # static mirror site
    #Redirect temp / http://dmoztools.net/
    # community forum site
    #Redirect temp / https://www.resource-zone.com/
</VirtualHost>

#####################################################################
# addons.mozilla.COM

<VirtualHost *:80>
    # old addons sites - bug 503731
    ServerName extensions.mozilla.org
    ServerAlias themes.mozilla.org update.mozilla.org addons.update.mozilla.org
    # Bug 528747
    ServerAlias updates.mozilla.org
    # Bug 537144
    ServerAlias firefoxaddons.com www.firefoxaddons.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://addons.mozilla.org/
</VirtualHost>

#####################################################################
# lightning-project.org
<VirtualHost *:80>
    ServerName lightning-project.org
    ServerAlias www.lightning-project.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / http://www.mozilla.org/projects/calendar/lightning/
</VirtualHost>

#####################################################################
# Bug 510914
<VirtualHost *:80>
    ServerName library.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect / http://wiki.mozilla.org/
</VirtualHost>

#####################################################################
# Bug 572191
<VirtualHost *:80>
    ServerName talkback.mozilla.org
    ServerAlias talkback-public.mozilla.org talkback-reports.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://crash-stats.mozilla.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName firefoxcup.com
    ServerAlias www.firefoxcup.com www.firefoxcup2010.com firefoxcup2010.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . http://blog.mozilla.org/blog/2010/07/15/thanks-for-an-exciting-firefox-cup/ [R=301]
</VirtualHost>

# Bug 613649
<VirtualHost *:80>
    ServerName krakenbenchmark.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://krakenbenchmark.mozilla.org/
</VirtualHost>

# Bug 614684
<VirtualHost *:80>
    ServerName impactmozilla.com
    ServerAlias www.impactmozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . http://blog.mozilla.org/blog/2008/12/22/congratulations-fox-for-all-wins-impact-mozilla/ [R=301]
</VirtualHost>

# Bug 617681
<VirtualHost *:80>
    ServerName operationfirefox.com
    ServerAlias www.operationfirefox.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . http://blog.mozilla.org/operationfx/2007/12/14/declassified-information-and-the-winner-is/ [R=301]
</VirtualHost>

# Bug 655911
<VirtualHost *:80>
    ServerName survey.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://blog.mozilla.org/website-archive/2010/12/08/mozilla-uninstall-survey/
</VirtualHost>

# Bug 681943
<VirtualHost *:80>
    ServerName festival.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect / https://mozillafestival.org/
</VirtualHost>

# Bug 692904
<VirtualHost *:80>
    ServerName mozilla.com.ru
    ServerAlias www.mozilla.com.ru

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect / http://www.mozilla-russia.org/
</VirtualHost>

# Bug 706961, 842792, & 957289
<VirtualHost *:80>
    ServerName college.mozilla.org
    ServerAlias college.mozilla.com interns.mozilla.com university.mozilla.org university.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://careers.mozilla.org/university/
</VirtualHost>

# Bug 722504
<VirtualHost *:80>
    ServerName mozillactf.org
    ServerAlias www.mozillactf.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect / https://wiki.mozilla.org/Security/Events/CTF
</VirtualHost>

# Bug 695084
<VirtualHost *:80>
    ServerName dev.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://developer.mozilla.org/
</VirtualHost>

# TODO: document why there's no *:81 VIP and yet this works
<VirtualHost *:80>
    ServerName aus2.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://aus2.mozilla.org/
</VirtualHost>

# begin bug 749836
<VirtualHost *:80>
    ServerName www.firefox.pt
    ServerAlias firefox.pt

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # bug 1427843
    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=firefox-pt\&utm_medium=referral [R=301]
</VirtualHost>

# bug 784556 & 880423
<VirtualHost *:80>
    ServerName print.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://mana.mozilla.org/wiki/display/SD/print.mozilla.com
</VirtualHost>

# bug 797641
<VirtualHost *:80>
    ServerName www.rockyourfirefox.com
    ServerAlias rockyourfirefox.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://blog.mozilla.org/website-archive/2012/10/03/keep-on-rockin/
</VirtualHost>

# bug 712061
<VirtualHost *:80>
    ServerName telemetry.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://metrics.mozilla.com/data/content/pentaho-cdf-dd/Render?solution=metrics2&path=%2Ftelemetry&file=LandingPage.wcdf
</VirtualHost>

# bug 804895
<VirtualHost *:80>
    ServerName www.arewefunyet.com
    ServerAlias arewefunyet.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://wiki.mozilla.org/Platform/AreWeFunYet
</VirtualHost>

# bug 811323
<VirtualHost *:80>
    ServerName devderby.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://developer.mozilla.org/demos/devderby
</VirtualHost>

# bug 855746
<VirtualHost *:80>
    ServerName mozillaecuador.org
    ServerAlias www.mozillaecuador.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://mozilla.ec
</VirtualHost>

# bug 908234
<VirtualHost *:80>
    ServerName webdev.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://blog.mozilla.org/webdev/
</VirtualHost>

<VirtualHost *:80>
    ServerName mpl.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/MPL/
</VirtualHost>

# bug 940553
<VirtualHost *:80>
    ServerName webifyme.org
    ServerAlias www.webifyme.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://blog.mozilla.org/website-archive/2011/11/15/webify-me/
</VirtualHost>

# bug 941881
<VirtualHost *:80>
    ServerName ambassadors.mozilla.org
    ServerAlias students.mozilla.org fsa.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://www.mozilla.org/en-US/contribute/studentambassadors/
</VirtualHost>

# bug 971390
<VirtualHost *:80>
    ServerName firefoxik.ru
    ServerAlias www.firefoxik.ru

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/ru/firefox/new/
</VirtualHost>

# TODO 20170328 atoll -- submitted a form entry asking for someone to contact me to verify form is in-use
# bug 998526
<VirtualHost *:80>
    ServerName confsurvey.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://docs.google.com/forms/d/1VSlo6TZ5p42LyTx2q7Wd5vQ5hZHvWtA9JN6JWicXmBM/viewform
</VirtualHost>

# bug 850584
<VirtualHost *:80>
    ServerName releases.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://download.cdn.mozilla.net/
</VirtualHost>

# bug 1025191
<VirtualHost *:80>
    ServerName mozilla.ca
    ServerAlias www.mozilla.ca

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/en-US/
</VirtualHost>

# bug 1035550
<VirtualHost *:80>
    ServerName wiki.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://wiki.mozilla.org
</VirtualHost>


# bug 1136318
<VirtualHost *:80>
    ServerName mozilla.at
    ServerAlias www.mozilla.at

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://www.mozilla.de/
</VirtualHost>

#bug 1203755
<VirtualHost *:80>
    ServerName boot2gecko.org
    ServerAlias www.boot2gecko.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://wiki.mozilla.org/B2G? [R=307]
</VirtualHost>

# bug 1056359 
<VirtualHost *:80>
    ServerName mozilla.it
    ServerAlias www.mozilla.it

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 301 / https://www.mozilla.org/en-US/firefox/new/
</VirtualHost>

# bug 1212631
# bug 1427843
<VirtualHost *:80>
    ServerName getfirefox.co.uk

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=getfirefox-co-uk\&utm_medium=referral [R=301]
</VirtualHost>

# bug 1212612
# bug 1427843
<VirtualHost *:80>
    ServerName getfirefox.de
    ServerAlias www.getfirefox.de firefox-hacks.de www.firefox-hacks.de firefox2.de www.firefox2.de

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=getfirefox-de\&utm_medium=referral [R=301]
</VirtualHost>

# bug 1214568 
<VirtualHost *:80>
    ServerName creative.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://blog.mozilla.org/creative
</VirtualHost>

# bug 1220879 
<VirtualHost *:80>
    ServerName whatsdeployed.paas.allizom.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / http://whatsdeployed.io/
</VirtualHost>

# bug 1220879
<VirtualHost *:80>
    ServerName prs.paas.allizom.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / http://prs.mozilla.io/
</VirtualHost>

# TODO: HSTS this redirect
# bug 1225273
# Bug 1359534
<VirtualHost *:80>
    ServerName taskcluster.net 

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://taskcluster.net/
</VirtualHost>
<VirtualHost *:81>
    ServerName taskcluster.net 

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # HSTS, short timeout initially
    Header always set Strict-Transport-Security "max-age=60"

    Redirect 302 / https://docs.taskcluster.net/
</VirtualHost>

# bug 1236078
# bug 1427843
<VirtualHost *:80>
    ServerName getfirefox.net 
    ServerAlias www.getfirefox.net

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=getfirefox-net\&utm_medium=referral [R=301]
</VirtualHost>

#bug 1195576
<VirtualHost *:80>
    ServerName mozillafoundation.com
    ServerAlias mozillafoundation.net 

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://mozillafoundation.org
</VirtualHost>

# bug 1243236
<VirtualHost *:80>
    ServerName jobs.mozilla.org
    ServerAlias jobs.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://careers.mozilla.org/
</VirtualHost>

#bug 1243355
<VirtualHost *:80>
    ServerName mozilla.frl
    ServerAlias www.mozilla.frl

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.mozilla.org/fy-NL/
</VirtualHost>

# bug 1234248
<VirtualHost *:80>
    ServerName ux.firefox.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / http://planet.firefox.com/ux/
</VirtualHost>

# TODO: bad redirect chaining
#bug 1255190
<VirtualHost *:80>
    ServerName openwebgames.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.openwebgames.com/
</VirtualHost>

# bug 1259820
<VirtualHost *:80>
    ServerName air.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://air.mozilla.org/
</VirtualHost>

# bug 1268570
# bug 1427843
<VirtualHost *:80>
    ServerName firefox.lt
    ServerAlias www.firefox.lt   

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/firefox/new/?utm_source=firefox-lt&utm_medium=referral
</VirtualHost>

# bug 1290923
<VirtualHost *:80>
    ServerName trackingprotection.info
    ServerAlias www.trackingprotection.info

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://disconnect.me/trackerprotection
</VirtualHost>

# bug 1262196
# bug 1427843
<VirtualHost *:80>
    ServerName firefox.hu 
    ServerAlias www.firefox.hu

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=firefox-hu\&utm_medium=referral [R=301]
</VirtualHost>


# bug 1311392
<VirtualHost *:80>
    ServerName mozillafirefox.pl
    ServerAlias www.mozillafirefox.pl

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.mozilla.org/pl/firefox/new/
</VirtualHost>

# bug 1334200
<VirtualHost *:80>
    ServerName popcornjs.org
    ServerAlias www.popcornjs.org
    RewriteEngine On
    RewriteRule ^/.*$ https://github.com/mozilla/popcorn-js/ [R=301]
    Header always set Cache-Control "max-age=36000"
</VirtualHost>

#Bug 1342698
<VirtualHost *:80>
    ServerName mozillausa.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect temp / http://blog.mozilla.org/
</VirtualHost>

# modeled after the virtual-redirect-autogen condensed form
<VirtualHost *:80>
    ServerName virtual-redirect-firefox

    # bug 838939
    ServerAlias downloadmozillafirefox.com
    # bug 948963
    ServerAlias spark.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . https://www.mozilla.org/firefox/ [R=302,L]
</VirtualHost>

# Bug 688019
# Bug 1427843
<VirtualHost *:80>
    ServerName getfirefox.org
    ServerAlias www.getfirefox.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=getfirefox-org&utm_medium=referral [R=301,L]
</VirtualHost>

# virtual-redirect-autogen.conf merged into virtual-redirect
# this used to be generated by a script somehow, but not now.
# that script was dnsconfig/bin/generate-virtual-redirects.sh

<VirtualHost *:80>
    ServerName virtual-redirect-mozilla.org
    ServerAlias virtual-redirect-mozilla.com

    ServerAlias mozillaservice.net www.mozillaservice.net
    ServerAlias firefox4all.com www.firefox4all.com
    ServerAlias firefoxsoftware.com www.firefoxsoftware.com
    ServerAlias getfirfox.com www.getfirfox.com
    ServerAlias update-firefox.com www.update-firefox.com
    ServerAlias extendfirefox.com www.extendfirefox.com
    ServerAlias onemozilla.org www.onemozilla.org
    # bug 1234360
    ServerAlias firefoxflicks.mozilla.org
    # bug 126196
    ServerAlias mozilla.hu www.mozilla.hu
    # bug 1331870
    ServerAlias events.mozspaces.org
    # Bug 710695 708705
    ServerAlias firefoxflicks.com firefoxflicks.org www.firefoxflicks.com www.firefoxflicks.org
    # fashionyourfirefox.com - Modified as per Bug 614412
    ServerAlias fashionyourfirefox.com www.fashionyourfirefox.com
    # We're not using website-beta right now.
    ServerAlias website-beta.mozilla.org
    # split out store.mozilla.org|com as per bug 1142629
    # modified for bug 1260869 now that gear.mozilla.org has gone away
    ServerAlias www.store.mozilla.org store.mozilla.org store.mozilla.com
    # Bug 619759
    ServerAlias www.mozilla.net
    # bug 870904
    ServerAlias mozsecworld.org www.mozsecworld.org
    # bug 841514
    ServerAlias detodosparatodos.org www.detodosparatodos.org detodosparatodos.com www.detodosparatodos.com
    # bug 1268570
    ServerAlias firefox-downloaden.de
    # bug 830904
    ServerAlias communitystore.mozilla.org
    # TODO: can we decom this?
    # bug 1234360
    ServerAlias mobilepartners.mozilla.org
    # bug 1169224
    ServerAlias mozilla.org.uk www.mozilla.org.uk
    # bug 1329125
    ServerAlias masterfirefoxos.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . https://www.mozilla.org/ [R=302,L]
</VirtualHost>

<VirtualHost *:80>
    ServerName virtual-redirect-mozilla-europe.org

    ServerAlias difundefirefox.com www.difundefirefox.com
    ServerAlias mozila.eu www.mozila.eu
    ServerAlias mozilla-europe.de www.mozilla-europe.de
    ServerAlias mozilla.fr www.mozilla.fr
    ServerAlias mozillaeurope.org
    ServerAlias www.mozillaeurope.org mozilla.eu www.mozilla.eu

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule . http://www.mozilla-europe.org [R=302,L]
</VirtualHost>

# end of old virtual-redirect-autogen imports.

<VirtualHost *:80>
    ServerName apps.mozillalabs.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://marketplace.firefox.com/
</VirtualHost>

# bug 1427843
<VirtualHost *:80>
    ServerName firefox.be 
    ServerAlias www.firefox.be

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/firefox/new/?utm_source=firefox-be&utm_medium=referral
</VirtualHost>

# TODO: can we simplify these?
#####################################################################
# Bug 537925
<VirtualHost *:80>
    ServerName contribute.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On

    RewriteRule ^/index\.html$ http://www.mozilla.org/contribute/ [L,R=301]
    RewriteRule ^/$ http://www.mozilla.org/contribute/ [R=301]
    RewriteRule ^/(.+)$ http://guides.mozilla.org/$1 [QSA,R=301]
</VirtualHost>

# Bug 713065
<VirtualHost *:80>
    ServerName guides.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule /.* https://wiki.mozilla.org/MarketingGuide [R=permanent,L]
</VirtualHost>

# This virtual host redirects requests made by the live bookmark in Firefox's
# default personal toolbar, the purpose of which is to demonstrate the feature.
<VirtualHost *:80>
    ServerName fxfeeds.mozilla.org
    ServerAlias fxfeeds.mozillazine.org
    ServerAlias fxfeeds.mozilla.com
    ServerAlias *.fxfeeds.mozilla.com

    # 302's still set Content-Type: text/html, according to curl
    ExpiresActive on
    ExpiresByType text/html "access plus 1 week"
    Header set Cache-Control "max-age=604800"

    RewriteEngine On

    # catch old clients on Japanese FF 1.5 and older
    RewriteCond %{HTTP_HOST} =^fxfeeds\.mozilla-japan\.org$
    RewriteRule ^/rss20\.xml$ /ja/firefox/headlines.xml

    RewriteRule ^/af/firefox/headlines.xml http://www.news24.com/News24v2/Components/Generic/news24RSSFeed/0,,3,00.xml [R]
    RewriteRule ^/as/firefox/headlines.xml http://www.bbc.co.uk/hindi/index.xml [R]
    RewriteRule ^/ast/firefox/headlines.xml http://www.europapress.es/rss/rss.aspx?ch=395 [R]
    RewriteRule ^/bg/firefox/headlines.xml http://dnevnik.bg/rss/ [R]
    RewriteRule ^/be/firefox/headlines.xml http://nn.by/rss.php [R]
    RewriteRule ^/bn-BD/firefox/headlines.xml http://rss.bdnews24.com/rss/bangla/home/rss.xml [R]
    RewriteRule ^/bn-IN/firefox/headlines.xml http://www.telegraphindia.com/feeds/rss.jsp?id=3 [R]
    RewriteRule ^/br/firefox/headlines.xml http://www.agencebretagnepresse.com/rss-all.php [R]
    RewriteRule ^/bs/firefox/headlines.xml http://www.mojportal.ba/rssfeed/7 [R]
    RewriteRule ^/ca/firefox/headlines.xml http://www.vilaweb.cat/media/rss/noticies_edicio_333_rss.xml [R]
    RewriteRule ^/cs/firefox/headlines.xml http://firefox-rss.ceskenoviny.cz/ [R]
    RewriteRule ^/csb/firefox/headlines.xml http://www.gazeta.pl/pub/rss/wiadomosci.xml [R]
    RewriteRule ^/cy/firefox/headlines.xml http://newsrss.bbc.co.uk/rss/welsh/newyddion/rss.xml [R]
    RewriteRule ^/da/firefox/headlines.xml http://www.dr.dk/Forms/Published/rssNewsFeed.aspx?config=4cdd8bff-48a5-461c-a848-f553db411d4c&rss=Yes&rssTitle=DR+Nyheder+Online+-+Alle+nyheder&overskrift=Alle+nyheder+-+24+timer&Url=\%2fnyheder\%2f&escaping=Yes [R,NE]
    RewriteRule ^/de/firefox/headlines.xml http://www.tagesschau.de/xml/rss2 [R]
    RewriteRule ^/el/firefox/headlines.xml http://news.google.gr/nwshp?hl=el&tab=wn&output=rss [R]
    RewriteRule ^/en-GB/firefox/headlines.xml http://news.bbc.co.uk/rss/newsonline_uk_edition/front_page/rss.xml [R]
    RewriteRule ^/eo/firefox/headlines.xml http://www.liberafolio.org/search_rss?SearchableText=&Title=&Description=&portal_type:list=News+Item&portal_type:list=Link&portal_type:list=Document&Creator=redakcio&submit=Search&sort_on=created&sort_order=reverse&review_state=published&sort_limit:int=20 [R]
    RewriteRule ^/es-AR/firefox/headlines.xml http://www.clarin.com/diario/hoy/um/sumariorss.xml [R]
    RewriteRule ^/es-CL/firefox/headlines.xml http://latercera.com/app/rss?sc=TEFURVJDRVJB&ul=1 [R]
    RewriteRule ^/es-ES/firefox/headlines.xml http://www.20minutos.es/rss/ [R]
    RewriteRule ^/es-MX/firefox/headlines.xml http://www.eluniversal.com.mx/rss/universalmxm.xml [R]
 
    RewriteRule ^/et/firefox/headlines.xml http://www.postimees.ee/rss/ [R]
    RewriteRule ^/eu/firefox/headlines.xml http://www.berria.info/rss/berria.php [R]
    RewriteRule ^/fa/firefox/headlines.xml http://news.parseek.com/rss/ [R]
    RewriteRule ^/fi/firefox/headlines.xml http://www.yle.fi/uutiset/rss/paauutiset.xml [R]
    RewriteRule ^/fr/firefox/headlines.xml http://www.lemonde.fr/rss/sequence/0,2-3208,1-0,0.xml?nav=firefox [R]
    RewriteRule ^/fy-NL/firefox/headlines.xml http://www.omropfryslan.nl/rss [R]
    RewriteRule ^/ga-IE/firefox/headlines.xml http://gaelport.com/rss.php [R]
    RewriteRule ^/gd/firefox/headlines.xml http://www.bbc.co.uk/scotland/alba/naidheachdan/index.xml [R]
    RewriteRule ^/gl/firefox/headlines.xml http://chuza.org/rss2.php [R]
    RewriteRule ^/he/firefox/headlines.xml http://www.ynet.co.il/Integration/StoryRss2.xml [R]
    RewriteRule ^/hi-IN/firefox/headlines.xml http://www.bbc.co.uk/hindi/index.xml [R]
    RewriteRule ^/hu/firefox/headlines.xml http://24ora.index.hu/?rss&keres=&szerzokeres=&rovatkeres=osszes&order=1 [R]
    RewriteRule ^/hy-AM/firefox/headlines.xml http://news.am/arm/rss/ [R]
    RewriteRule ^/id/firefox/headlines.xml http://sindikasi.okezone.com/index.php/news/RSS2.0 [R]
    RewriteRule ^/is/firefox/headlines.xml http://www.mbl.is/mm/rss/forsida.xml [R]
    RewriteRule ^/it/firefox/headlines.xml http://static.adnkronos.com/rss/RSS_FireFox.xml [R]
    RewriteRule ^/ja/firefox/headlines.xml http://mainichi.jp/rss/etc/mainichi.rss [R]
    RewriteRule ^/kk/firefox/headlines.xml http://www.azattyq.org/rss/ [R]
    RewriteRule ^/kn/firefox/headlines.xml http://sampada.net/node/feed [R]
    RewriteRule ^/ko/firefox/headlines.xml http://news.google.co.kr/?output=rss [R]
    RewriteRule ^/lt/firefox/headlines.xml http://www.lrt.lt/rss/all.php [R]
    RewriteRule ^/lv/firefox/headlines.xml http://www.delfi.lv/rss.php [R]
    RewriteRule ^/ml/firefox/headlines.xml http://mangalam.com/rss/rssm.php [R] 
    RewriteRule ^/mk/firefox/headlines.xml http://www.makdenes.org/rss/ [R]
    RewriteRule ^/mr/firefox/headlines.xml http://www.bbc.co.uk/hindi/index.xml [R]
    RewriteRule ^/nb-NO/firefox/headlines.xml http://www.nrk.no/nyheiter/toppsaker.rss [R]
    RewriteRule ^/nl/firefox/headlines.xml http://feeds.nos.nl/nosnieuws [R]
    RewriteRule ^/nn-NO/firefox/headlines.xml http://www.nrk.no/nyheiter/toppsaker.rss [R]
    RewriteRule ^/oc/firefox/headlines.xml http://www.ostaldoccitania.net/data/newsoc.xml [R]
    RewriteRule ^/or/firefox/headlines.xml http://newsrss.bbc.co.uk/rss/newsonline_world_edition/south_asia/rss.xml [R]
    RewriteRule ^/pl/firefox/headlines.xml http://www.gazeta.pl/pub/rss/wiadomosci.xml [R]
    RewriteRule ^/pt-BR/firefox/headlines.xml http://www.estadao.com.br/rss/ultimas.xml?source=fx [R]
    RewriteRule ^/pt-PT/firefox/headlines.xml http://www.destakes.com/ultimas/?cat=newspaper&format=rss [R]
    RewriteRule ^/rm/firefox/headlines.xml http://www.rtr.ch/categoriesFeed/d5e1ee01-34db-4f20-953b-f3781243bf8d,b7192a1e-7f70-4441-9fbe-d8c50a4d9ffe,0b6aafe7-505b-4ba1-af67-b2fd0cb7c801,2de65430-024f-43fc-8b5c-8135ce6dd7c4,83545462-f436-4074-838c-9047b47d5cd9 [R]
    RewriteRule ^/ro/firefox/headlines.xml http://www.bbc.co.uk/romanian/index.xml [R]
    RewriteRule ^/ru/firefox/headlines.xml http://news.rambler.ru/rss/head/ [R]
    RewriteRule ^/si/firefox/headlines.xml http://blogs.sinhalabloggers.com/feed/ [R]
    RewriteRule ^/sk/firefox/headlines.xml http://rss.sme.sk/rss/rss.asp?sek=smeonline&id=frontpage [R]
    RewriteRule ^/sl/firefox/headlines.xml http://rss.24ur.com/index.rss [R]
    RewriteRule ^/sq/firefox/headlines.xml http://www.bbc.co.uk/albanian/index.xml [R]
    RewriteRule ^/sr/firefox/headlines.xml http://www.naslovi.net/rss/ [R]
    RewriteRule ^/sv-SE/firefox/headlines.xml http://api.sr.se/api/rssfeed/rssfeed.aspx?rssfeed=83 [R]
    RewriteRule ^/ta/firefox/headlines.xml http://www.bbc.co.uk/tamil/index.xml [R]
    RewriteRule ^/ta-LK/firefox/headlines.xml http://www.bbc.co.uk/tamil/index.xml [R]
    RewriteRule ^/te/firefox/headlines.xml http://in.telugu.yahoo.com/rss/news.xml [R]
    RewriteRule ^/th/firefox/headlines.xml http://newsrss.bbc.co.uk/rss/newsonline_world_edition/asia-pacific/rss.xml [R]
    RewriteRule ^/tr/firefox/headlines.xml http://www.ntvmsnbc.com/id/3032091/device/rss/rss.xml [R]
    RewriteRule ^/uk/firefox/headlines.xml http://www.bbc.co.uk/ukrainian/index.xml [R]
    RewriteRule ^/vi/firefox/headlines.xml http://vietnamnet.vn/rss/index.rss [R]
    RewriteRule ^/zh-TW/firefox/headlines.xml http://web.pts.org.tw/php2/rss/xml/ptsnews.xml [R]
    RewriteRule ^/zh-CN/firefox/headlines.xml http://rss.sina.com.cn/news/marquee/ddt.xml [R]

    RewriteRule ^/(\w{2,3}(-\w{2,3}(-mac)?)?)/(.*) http://fxfeeds.mozilla.com/$4 [R]
    RewriteRule ^/(firefox/)?livebookmarks(.*)$ http://www.mozilla.org/firefox/livebookmarks.html [R]

    Redirect temp /rss20.xml http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml
    Redirect temp /firefox/headlines.xml http://newsrss.bbc.co.uk/rss/newsonline_world_edition/front_page/rss.xml
    Redirect temp / http://www.mozilla.org/firefox/livebookmarks.html

    # Don't log in three different ways: redirect log output to /dev/null,
    # log only the empty string, and log only if the "nonexistent" environment
    # variable exists (which it doesn't).  It'd be nice to just say "don't log",
    # but Apache apparently doesn't have that capability.  Duh.
    CustomLog /dev/null " " env=nonexistent

    # Do log errors, since those could be interesting to know about.
    ErrorLog logs/fxfeeds-error_log
</VirtualHost>

###### HTTPS-capable redirects ######
#
# Everything here is assumed to have a SAN or SNI certificate.
#
#####################################

# bug 998357
<VirtualHost *:80>
    # REDIRECTS, relevant
    ServerName activations.mozilla.com
    # REDIRECTS, relevant
    ServerAlias activations.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://activations.mozilla.com
    ServerAlias activations.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://activations.cdn.mozilla.net/
</VirtualHost>

#bug 1274647
<VirtualHost *:80>
    ServerName ask.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://ask.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://discourse.mozilla-community.org/c/firefox-development/? [R=307]
</VirtualHost>

<VirtualHost *:80>
    ServerName aurora.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://aurora.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # bug 1351245 updates this to developer channel
    Redirect / https://www.mozilla.org/firefox/channel/desktop/#developer
</VirtualHost>

# Bug 656457
<VirtualHost *:80>
    ServerName beta.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://beta.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/firefox/channel/#beta
</VirtualHost>

# bug 1246674 
<VirtualHost *:80>
    ServerName careers.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://careers.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://careers.mozilla.org/
</VirtualHost>

# TODO: 20170327 atoll - asked pmac if this is still an active campaign
# bug 1119912, 1165757, etc.
<VirtualHost *:80>
    ServerName content.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://content.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # bug 1213900
    Redirect 302 /dmexco https://www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team

    # bug 1200359
    RedirectMatch 302 "/([-_a-zA-Z0-9./]+)" "https://www.mozilla.org/about/partnerships/contentservices/$1/?utm_source=content-moz-org\&utm_medium=referral\&utm_content=content_team"

    Redirect 302 / https://www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team
</VirtualHost>

# bug 756358
<VirtualHost *:80>
    ServerName dnt.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://dnt.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent /dnt-enabler.tpl http://www.mozilla.org/media/dnt/dnt-enabler.tpl
    Redirect permanent / https://www.mozilla.org/firefox/dnt/
</VirtualHost>

# bug 1185027

# We use individual redirects from http://x/ to https://x/ to handle HSTS+redirects correctly. [#1309999]
<VirtualHost *:80>
    ServerName contributejson.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
# Accept all of the https://x/ inbound redirects from http://x/ above, and set HSTS as part of the 302. [#1309999]
<VirtualHost *:81>
    ServerName https://contributejson.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.contributejson.org/

    # HSTS enforcement, 2 year duration.
    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

# Bug 1335596
<VirtualHost *:80>
    ServerName designlanguage.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://designlanguage.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://mozilla.ninja/ [R=301]

    # HSTS, 2 year timeout.
    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

#bug 1200302
<VirtualHost *:80>
    ServerName forums.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://forums.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://discourse.mozilla-community.org/c/add-ons? [R=307]
</VirtualHost>

# bug 1255221 
<VirtualHost *:80>
    ServerName friends.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://friends.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.mozilla.org/contribute/friends 
</VirtualHost>

#####################################################################
# getfirefox and getthunderbird

# TODO: hand these off to EE?
# Firefox domains that redirect to Firefox home page.
<VirtualHost *:80>
    ServerName getfirefox.com
    ServerAlias www.getfirefox.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]

    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox_error_log_%Y-%m-%d 86400 -480"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox_access_%Y-%m-%d 86400 -480" combined
</VirtualHost>
<VirtualHost *:81>
    ServerName https://getfirefox.com
    ServerAlias www.getfirefox.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # Bug 1297860: Use HSTS
    Header always set Strict-Transport-Security "max-age=63072000"

    Redirect permanent /Firefox_3 http://www.mozilla.org/firefox/
    Redirect permanent /beta http://www.mozilla.org/firefox/channel
    Redirect permanent /nightly http://nightly.mozilla.org

    # bug 896570 (using RewriteRule directly to ensure query params are not passed per comment 11)
    # bug 1427843 Redirect to /firefox/new/
    RewriteEngine On
    RewriteRule / https://www.mozilla.org/firefox/new/?utm_source=getfirefox-com\&utm_medium=referral [R=301]

    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox-https_error_log_%Y-%m-%d 86400 -480"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox-https_access_%Y-%m-%d 86400 -480" combined
</VirtualHost>

# TODO: move to non-ssl block and from SAN [#1351181]
<VirtualHost *:80>
    ServerName mozillafirefox.com
    ServerAlias www.mozillafirefox.com firefoxbrowser.com www.firefoxbrowser.com firefoxbrowser.org www.firefoxbrowser.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent /Firefox_3 http://www.mozilla.org/firefox/
    Redirect permanent /beta http://www.mozilla.org/firefox/channel
    Redirect permanent /nightly http://nightly.mozilla.org

    # bug 896570 (using RewriteRule directly to ensure query params are not passed per comment 11)
    RewriteEngine On
    RewriteRule   / https://www.mozilla.org/firefox/?utm_source=getfirefox-com\&utm_medium=referral [R=301]

    ErrorLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox.com/error_log_%Y-%m-%d 86400 -480"
    CustomLog "|/usr/sbin/rotatelogs /var/log/httpd/getfirefox.com/access_%Y-%m-%d 86400 -480" combined
</VirtualHost>

# bug 1290260
<VirtualHost *:80>
    ServerName git.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://git.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://wiki.mozilla.org/DeveloperServices/HistoricalVCS
</VirtualHost>

# bug 1315316
<VirtualHost *:80>
    ServerName input.mozilla.org
    ServerAlias input.mozilla.com

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]

    Header always set Cache-Control "max-age=36000"
</VirtualHost>
<VirtualHost *:81>
    ServerName https://input.mozilla.org
    ServerAlias input.mozilla.com

    RewriteEngine On
    RewriteRule ^/.*$ https://qsurvey.mozilla.com/s3/FirefoxInput/ [R=302]

    Header always set Strict-Transport-Security "max-age=63072000"

    Header always set Cache-Control "max-age=36000"
</VirtualHost>
# TODO: decom this someday. -- atoll 20170327
<VirtualHost *:80>
    ServerName m.input.mozilla.org
    ServerAlias m.input.mozilla.com
    ServerAlias feedback.mozilla.org

    RewriteEngine On
    RewriteRule ^/.*$ https://qsurvey.mozilla.com/s3/FirefoxInput/ [R=302]

    Header always set Cache-Control "max-age=36000"
</VirtualHost>

# bug 1150296
<VirtualHost *:80>
    ServerName irccloud.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    # TODO: 302 rather than 307 here, see below
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=302,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://irccloud.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    # TODO: 307 would be safer for useragents, to maintain e.g. POST
    #       but testing would be required with actual clients
    Redirect 302 / https://irccloud.mozilla.com/
</VirtualHost> 

# TODO: merge for simplicity
# bug 1335617
<VirtualHost *:80>
    ServerName leandatapractices.org
    ServerAlias www.leandatapractices.org leandatapractices.com www.leandatapractices.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://leandatapractices.org
    ServerAlias www.leandatapractices.org leandatapractices.com www.leandatapractices.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://www.mozilla.org/en-US/about/policy/lean-data/ [R=302]

    # HSTS, 2 year timeout.
    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

#####################################################################
# phish-error.mozilla.com
<VirtualHost *:80>
    ServerName phish-error.mozilla.com
    ServerAlias *.phish-error.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://phish-error.mozilla.com
    ServerAlias *.phish-error.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On

    # Bug 1387246, send language and url query strings to google safebrowsing
    RewriteCond %{QUERY_STRING} hl=([^&]+)&url=([^&]+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&hl=%1&url=%2 [L,R,NE]

    # Bug 1387246, send lone url query strings to google safebrowsing
    RewriteCond %{QUERY_STRING} url=([^&]+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=%1 [L,R,NE]

    RewriteRule ^/.*$ https://www.mozilla.org/ [R]

</VirtualHost>

#####################################################################
# phish-report.mozilla.com
<VirtualHost *:80>
    ServerName phish-report.mozilla.com
    ServerAlias *.phish-report.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://phish-report.mozilla.com
    ServerAlias *.phish-report.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On

    RewriteCond %{QUERY_STRING} ^hl=(es)(?:-ES|-AR)&url=(.+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=%1&url=%2 [R,NE]

    RewriteCond %{QUERY_STRING} ^hl=(?:nb|nn)-NO&url=(.+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=no&url=%1 [R,NE]

    RewriteCond %{QUERY_STRING} ^hl=pt-PT&url=(.+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=pt-BR&url=%1 [R,NE]

    RewriteCond %{QUERY_STRING} ^hl=(ar|bg|cs|da|de|el|en|en-GB|es|fi|fr|hu|it|iw|ja|ko|nl|no|pl|pt-BR|ru|sk|sv|tr|zh-CN|zh-TW)&url=(.+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=%1&url=%2 [R,NE]

    RewriteCond %{QUERY_STRING} hl=([^&]+)&url=([^&]+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=%1&url=%2 [L,R,NE]

    # Bug 1387246, send lone url query strings to google safebrowsing
    RewriteCond %{QUERY_STRING} url=([^&]+)
    RewriteRule ^/$ https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=%1 [L,R,NE]

    RewriteRule ^/.*$ https://www.mozilla.org/ [R]

</VirtualHost>

#####################################################################
# malware-error.mozilla.com
<VirtualHost *:80>
    ServerName malware-error.mozilla.com
    ServerAlias *.malware-error.mozilla.com

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://malware-error.mozilla.com
    ServerAlias *.malware-error.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On

    # Bug 1387246, send language and/or url query strings to google safebrowsing
    RewriteCond %{QUERY_STRING} hl=([^&]+)&url=([^&]+)
    RewriteRule "^/$" "https://www.stopbadware.org/firefox?hl=%1&url=%2" [L,R=307]

    RewriteCond %{QUERY_STRING} url=([^&]+)
    RewriteRule "^/$" "https://www.stopbadware.org/firefox?url=%1" [L,R=307]

    RewriteRule ^/.*$ https://www.mozilla.org/ [R]

</VirtualHost>

# Bug 1306375
<VirtualHost *:80>
    ServerName moztrap.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://moztrap.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://wiki.mozilla.org/TestEngineering/Testrail

    # HSTS, 2 year timeout.
    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

# bug 1301642, 1326390
<VirtualHost *:80>
    ServerName nightly.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://nightly.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.mozilla.org/firefox/channel/#nightly

    # HSTS, 2 year timeout.
    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>


# bug 1304806
<VirtualHost *:80>
    ServerName phonebook.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://phonebook.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://phonebook.mozilla.org/

    ## SSL-specific security headers requested by websec [#1261870]
    # these are set *before* SSO, as they affect only our specific SSL site

    # HSTS enforcement, 2 year duration.
    Header always set Strict-Transport-Security "max-age=63072000"

    # HPKP certificate pinning headers, with escaped \" double quotes [#1304799]
    # 3600 seconds only for initial testing -- 20160922 atoll
    Header always set Public-Key-Pins "max-age=3600; pin-sha256=\"zSvnhQdjmYpQNahZ5voq6EGaNgaT0ElRiy+mzBD7p+k=\"; pin-sha256=\"5kJvNEMw0KjrCAu7eXY5HZdvyCS13BbA0VJG1RSP91w=\"; pin-sha256=\"YLh1dUR9y6Kja30RrAn7JKnbQG/uEtLMkBgFF2Fuihg=\"; pin-sha256=\"sRHdihwgkaib1P1gxX8HFszlD+7/gTfNvuAybgLPNis=\""
</VirtualHost>

# TODO: ask :pike if we can decom this?
# bug 985510
<VirtualHost *:80>
    ServerName pontoon.mozillalabs.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://pontoon.mozillalabs.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RedirectMatch permanent /(.*)$ https://pontoon.mozilla.org/$1
</VirtualHost>

# bug 1311146
<VirtualHost *:80>
    ServerName sendto.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://sendto.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule ^/.*$ https://donate.mozilla.org/? [R=307]
</VirtualHost>

# bug 1206287
<VirtualHost *:80>
    ServerName srihash.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://srihash.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.srihash.org/

    Header always set Strict-Transport-Security "max-age=15768000"
</VirtualHost>

# bug 1053962
<VirtualHost *:80>
    ServerName standu.ps

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://standu.ps

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.standu.ps/

    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

# bug 1293353
<VirtualHost *:80>
    ServerName thehub.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://thehub.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://mozilla.service-now.com/

    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

<VirtualHost *:80>
    ServerName firefoxparty.com
    ServerAlias www.firefoxparty.com
    # bug 499384
    ServerAlias mozillaparty.com www.mozillaparty.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / http://affiliates.mozilla.org/
</VirtualHost>

# bug 1232976
<VirtualHost *:80>
    ServerName affiliates.mozilla.org

    Header always set Cache-Control "max-age=3600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://affiliates.mozilla.org

    Header always set Cache-Control "max-age=3600"

    RewriteEngine On
    #Changed line below for Bug 1329951
    #RewriteRule ^/media/uploads/(.*)$ https://www.mozilla.org/contribute/friends/ [R=302]
    RewriteRule ^/media/uploads/(.*)$ https://www.mozilla.org/contribute/friends/ [R=404]
    RewriteRule ^/referral/(.*)$ https://mozilla.org/firefox/desktop/ [R=302]
    RewriteRule ^/(.+)$ https://www.mozilla.org/contribute/friends/ [R=302]
</VirtualHost>

#Bug 1340330
<VirtualHost *:80>
    ServerName metricsgraphicsjs.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://metricsgraphicsjs.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.metricsgraphicsjs.org/
</VirtualHost>

# bug 1007990
<VirtualHost *:80>
    ServerName docs.services.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://docs.services.mozilla.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://mozilla-services.readthedocs.io/$1" [L,R=307,QSA]

    Header always set Strict-Transport-Security "max-age=63072000"
</VirtualHost>

#bug 1320683
<VirtualHost *:80>
    ServerName arewestableyet.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://arewestableyet.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.arewestableyet.com/
</VirtualHost>

# Bug 1361114
<VirtualHost *:80>
    ServerName webwewant.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://webwewant.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/
</VirtualHost>
<VirtualHost *:80>
    ServerName mozilla-podcasts.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://mozilla-podcasts.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/
</VirtualHost>

# Bug 1366849
<VirtualHost *:80>
    ServerName calendar.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://calendar.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/en-US/projects/calendar/
</VirtualHost>

#bug 1384357
<VirtualHost *:80>
    ServerName extensiontest.com

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://www.extensiontest.com/
</VirtualHost>

# Bug 1396954
<VirtualHost *:80>
    ServerName mixedreality.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://mixedreality.mozilla.org/
</VirtualHost>
<VirtualHost *:81>
    ServerName https://mixedreality.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://research.mozilla.org/mixed-reality
</VirtualHost>

<VirtualHost *:80 *:81>
    ServerName m.mozilla.org
    ServerAlias m.allizom.org

    Header always set Strict-Transport-Security "max-age=63072000"
    Header always set Cache-Control "max-age=600"

    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^m.mozilla.org$
    RewriteRule ^/?(.*) https://mana.mozilla.org/wiki/display/NAGIOS/$1 [L,R=307]
</VirtualHost>

# Bug 1414285
# Bug 1429854
<VirtualHost *:80>
    ServerName airmo.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://airmo.mozilla.org
</VirtualHost>
<VirtualHost *:81>
    ServerName https://airmo.mozilla.org

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://onlinexperiences.com/scripts/Server.nxp?LASCmd=L:0&AI=1&InitialDisplay=1&ClientBrowser=0&ShowKey=44908
</VirtualHost>

# Bug 1415362
<VirtualHost *:80>
    ServerName firefoxquantum.com

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://firefoxquantum.com
</VirtualHost>
<VirtualHost *:81>
    ServerName https://firefoxquantum.com

    # Default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect permanent / https://www.mozilla.org/firefox/?utm_medium=referral&utm_source=firefoxquantum-com
</VirtualHost>


# bug 1421587
<VirtualHost *:80>
    ServerName open.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    RewriteEngine On
    RewriteRule "^/?(.*)" "https://%{HTTP_HOST}/$1" [L,R=307,QSA]
</VirtualHost>
<VirtualHost *:81>
    ServerName https://open.mozilla.org

    # default redirect caching duration
    Header always set Cache-Control "max-age=600"

    Redirect 302 / https://medium.com/mozilla-open-innovation
</VirtualHost>
